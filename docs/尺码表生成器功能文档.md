# 尺码表生成器 - 功能文档

## 📋 项目概述

基于 Electron + React 的桌面应用，生成服装行业标准尺码表，支持可视化预览和多格式导出。

## 🎯 核心功能

### 1. 尺码设置
- **起始尺码**：XS 到 4XL 完整范围
- **数量控制**：1-8个尺码
- **智能序列**：自动生成标准尺码序列
- **类别起始值**：为每个选中类别自定义起始数值

### 2. 服装模式
- **普通模式**：标准递进值
- **毛衣模式**：胸围等关键部位递进值减半

### 3. 类别管理
#### 预设类别（9种）
- **胸围/腰围/臀围/下摆围**：递进值 4cm
- **肩宽/袖长/衣长/裤长/中后长**：递进值 1cm

#### 自定义类别
- 添加/编辑/删除自定义测量部位
- 自定义递进值
- 本地数据持久化

### 4. Canvas 导出规格
#### 画布设置
- **尺寸**：600×600px 固定
- **背景**：白色 (#FFFFFF)
- **单元格比例**：10:6 (宽:高)

#### 表格样式
- **边框**：1px 黑色实线
- **标题行**：黑底白字，粗体 16px
- **数据行**：白底黑字，常规 14px
- **对齐**：居中
- **导出**：JPEG 格式，95% 质量

## 🏗️ 技术栈

- **React 18** + Hooks
- **Ant Design 5** (Finder 风格定制)
- **Electron 27** + Electron Forge
- **Styled Components**
- **Canvas API** (图表渲染)
- **LocalStorage** (本地持久化)

## 📱 界面设计

### 整体布局 (Finder 风格)
```
┌─ 🔴🟡🟢 尺码表生成器 ──────────┐
├─ 📁尺码设置 📏类别管理 👁预览 ─┤
├───────────┬─────────────────────┤
│ 侧边栏导航  │ 主内容区域           │
│ 🏷️预设类别 │ 📊尺码表预览        │
│ ➕自定义   │ 📋表格/🖼️图形      │
├───────────┴─────────────────────┤
│ 📤导出 🔄刷新 ℹ️状态信息        │
└─────────────────────────────────┘
```

### 快捷键
- **Cmd + N**：新建类别
- **Cmd + E**：导出表格
- **Cmd + R**：刷新预览
- **Space**：快速预览
- **Delete**：删除选中

## 📊 数据模型

### 应用状态
```javascript
{
  mode: 'normal' | 'sweater',
  sizeSettings: { startSize: 'S', count: 4 },
  categories: [],
  selectedCategories: [],
  startValues: {},
  chartData: null
}
```

### 类别结构
```javascript
{
  id: 'string',
  name: 'string', 
  baseIncrement: number,
  isCustom: boolean,
  createdAt: 'string'
}
```

## 🚀 项目结构

```bash
chi-ma-biao-7.16/
├── src/
│   ├── components/          # React组件
│   ├── hooks/               # 自定义Hooks
│   ├── services/            # 业务逻辑
│   │   ├── export.js        # Canvas导出
│   │   ├── calculation.js   # 尺码计算
│   │   └── database.js      # 数据持久化
│   ├── utils/               # 工具函数
│   ├── styles/              # 样式系统
│   ├── App.jsx              # 主应用
│   ├── main.js              # Electron主进程
│   └── preload.js           # 预加载脚本
├── package.json
├── forge.config.js
└── webpack.config.js
```

## 🔧 开发环境

### 系统要求
- **Node.js 18+**
- **npm 8+** 或 **yarn 3+**

### 核心依赖
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "antd": "^5.12.0",
    "styled-components": "^6.1.0",
    "electron": "^27.3.11"
  }
}
```

### 开发命令
```bash
npm install     # 安装依赖
npm start       # 启动开发
npm run build   # 构建生产版本
npm run package # 打包应用
npm run make    # 创建安装包
```

## 📈 Canvas 渲染实现

### 关键算法
```javascript
// 单元格尺寸计算（10:6比例）
const calculateCellSize = (rows, cols) => {
  const maxWidth = 500;
  const maxHeight = 500;
  const cellWidth = Math.min(maxWidth / cols, (maxHeight / rows) * (10/6));
  const cellHeight = cellWidth * (6/10);
  return { width: cellWidth, height: cellHeight };
};

// 表格居中定位
const centerTable = (tableWidth, tableHeight) => ({
  x: (600 - tableWidth) / 2,
  y: (600 - tableHeight) / 2
});
```

### 渲染流程
1. **计算布局** → 动态计算表格尺寸
2. **绘制背景** → 600×600白色背景
3. **绘制框架** → 黑色边框线条
4. **填充内容** → 标题行（黑底白字）+ 数据行（白底黑字）
5. **导出图片** → JPEG格式，95%质量

## 🛡️ 质量保证

### 性能优化
- React组件懒加载
- Canvas渲染优化
- 内存泄漏防护

### 错误处理
- 全局错误边界
- 数据验证
- 用户友好提示

### 安全考虑
- 本地数据加密
- 输入验证
- 安全文件操作

---

*基于 Finder 风格的尺码表生成器 - 专业、直观、高效的服装尺码管理工具*
