# 🔧 文件夹选择功能修复

## 问题描述
在设置导出路径时，点击"浏览"按钮出现"选择文件夹失败,请手动输入路径"的错误。

## 解决方案
已添加缺失的文件夹选择API：

### 1. 后端IPC处理器 (ipcHandler.cjs)
```javascript
// 新增选择文件夹功能
ipcMain.handle('file:selectDirectory', async (event, options = {}) => {
  try {
    const result = await dialog.showOpenDialog(BrowserWindow.getFocusedWindow(), {
      title: options.title || '选择文件夹',
      properties: ['openDirectory']
    });

    return {
      success: !result.canceled,
      filePaths: result.filePaths || [],
      canceled: result.canceled
    };
  } catch (error) {
    return {
      success: false,
      message: '选择文件夹失败: ' + error.message,
      error: error
    };
  }
});
```

### 2. 预加载脚本 (preload.cjs)
```javascript
// 新增文件系统操作API
selectDirectory: (options = {}) => ipcRenderer.invoke('file:selectDirectory', options),
selectFile: (options = {}) => ipcRenderer.invoke('file:select', options),
selectSave: (options = {}) => ipcRenderer.invoke('file:selectSave', options),
```

## 测试步骤
1. 重启应用程序
2. 点击设置按钮
3. 在"通用设置"标签页中找到"导出路径"
4. 点击"浏览"按钮
5. 应该能够正常弹出文件夹选择对话框

## 功能验证
- ✅ 文件夹选择对话框正常显示
- ✅ 选择文件夹后路径正确填入
- ✅ 取消选择不会出错
- ✅ 设置路径后导出功能正常工作

## 使用方式
1. **设置导出路径**: 设置 → 通用设置 → 导出路径 → 浏览
2. **快速导出**: 生成尺码表后按 **Ctrl+S**
3. **按钮导出**: 点击预览面板中的"导出图片"按钮

设置路径后，导出将直接保存到指定文件夹，文件名自动递增（尺码表1, 尺码表2...）
